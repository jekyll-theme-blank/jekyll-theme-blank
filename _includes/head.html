{%- assign canonical_url = page.url | absolute_url -%}

    <meta charset="UTF-8">

    {%- if site.color_scheme -%}
      {%- comment -%} WHITESPACE {%- endcomment %}
    <meta name="color-scheme" content="{{- site.color_scheme -}}">
    {%- endif -%}

    {%- comment -%} WHITESPACE {%- endcomment %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      {%- if page.layout == 'post-listing-page' -%}
        {{- site.title -}}
      {%- else -%}
        {%- comment -%} The character "+" is not escaped in `canonical_url`, but `url_decode` decodes "+" to a space. {%- endcomment -%}
        {{- canonical_url | replace: '+', '%2B' | url_decode -}}
      {%- endif -%}
    </title>
    <link rel="canonical" href="{{- canonical_url -}}">

    {%- if site.license_url -%}
      {%- comment -%} WHITESPACE {%- endcomment %}
    <link rel="license" href="{{- site.license_url -}}">
    {%- endif -%}
